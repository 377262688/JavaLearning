# Redis 学习笔记

## redis 5种基础数据结构

string,list,hash,set,zset

## redis 使用场景

### 缓存
一个对象如何存入redis，比如用户信息，是直接存json，还是分开字段存在hash中，
取决于使用的方式，如果大多数访问需要所有的字段，或者有些字段有变动，但是你不清楚是哪些字段变动，这时候就存json

如果大多数时候访问都是某些或者某个字段，或者在更改时清楚的知道哪些字段变化了，这时候用hash
### 分布式锁

- 用 set ex nx 实现，最简单方便，这里会存在 如果线程持有锁时间过长，锁自动过期，
等线程结束释放的是其他线程的锁，redis没有提供delifequals之类的方法，使用中最好不要在持有锁期间执行时间较长的任务。

- 可重入锁（不推荐使用，可以在逻辑结构上避免使用可重入锁），ThreadLocal



